{"remainingRequest":"/Users/mikey/hubgit/brightblock/brightblock-gaia-admin/node_modules/babel-loader/lib/index.js!/Users/mikey/hubgit/brightblock/brightblock-gaia-admin/node_modules/eslint-loader/index.js??ref--13-0!/Users/mikey/hubgit/brightblock/brightblock-gaia-admin/src/services/userProfilesService.js","dependencies":[{"path":"/Users/mikey/hubgit/brightblock/brightblock-gaia-admin/src/services/userProfilesService.js","mtime":1543581136000},{"path":"/Users/mikey/hubgit/brightblock/brightblock-gaia-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mikey/hubgit/brightblock/brightblock-gaia-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mikey/hubgit/brightblock/brightblock-gaia-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport { lookupProfile } from 'blockstack';\nvar userProfilesService = {\n  fetchUserProfile: function fetchUserProfile(username, success, failure) {\n    lookupProfile(username).then(function (account) {\n      if (account) {\n        var userProfile = {\n          username: username,\n          name: account.name,\n          description: account.description,\n          avatarUrl: account.image && account.image.length > 0 ? account.image[0].contentUrl : '',\n          apps: account.apps\n        };\n        var domain = location.origin;\n\n        for (var key in userProfile.apps) {\n          if (key.indexOf(domain) > -1) {\n            userProfile.appUrl = key;\n            userProfile.gaiaUrl = userProfile.apps[key];\n          }\n        }\n\n        success(userProfile);\n      } else {\n        failure({\n          error: 1,\n          message: 'Unable to find user: ' + username\n        });\n      }\n    }).catch(function (e) {\n      console.log('lookupUserProfile: e : ', e);\n      failure({\n        error: 2,\n        message: 'Unable to lookup user: ' + username\n      });\n    });\n  }\n};\nexport default userProfilesService;",{"version":3,"sources":["/Users/mikey/hubgit/brightblock/brightblock-gaia-admin/src/services/userProfilesService.js"],"names":["lookupProfile","userProfilesService","fetchUserProfile","username","success","failure","then","account","userProfile","name","description","avatarUrl","image","length","contentUrl","apps","domain","location","origin","key","indexOf","appUrl","gaiaUrl","error","message","catch","e","console","log"],"mappings":";AAAA,SACEA,aADF,QAEO,YAFP;AAIA,IAAMC,mBAAmB,GAAG;AAC1BC,EAAAA,gBAAgB,EAAE,0BAAUC,QAAV,EAAoBC,OAApB,EAA6BC,OAA7B,EAAsC;AACtDL,IAAAA,aAAa,CAACG,QAAD,CAAb,CACGG,IADH,CACQ,UAACC,OAAD,EAAa;AACjB,UAAIA,OAAJ,EAAa;AACX,YAAIC,WAAW,GAAG;AAChBL,UAAAA,QAAQ,EAAEA,QADM;AAEhBM,UAAAA,IAAI,EAAEF,OAAO,CAACE,IAFE;AAGhBC,UAAAA,WAAW,EAAEH,OAAO,CAACG,WAHL;AAIhBC,UAAAA,SAAS,EAAGJ,OAAO,CAACK,KAAR,IAAiBL,OAAO,CAACK,KAAR,CAAcC,MAAd,GAAuB,CAAzC,GAA8CN,OAAO,CAACK,KAAR,CAAc,CAAd,EAAiBE,UAA/D,GAA4E,EAJvE;AAKhBC,UAAAA,IAAI,EAAER,OAAO,CAACQ;AALE,SAAlB;AAOA,YAAIC,MAAM,GAAGC,QAAQ,CAACC,MAAtB;;AACA,aAAK,IAAIC,GAAT,IAAgBX,WAAW,CAACO,IAA5B,EAAkC;AAChC,cAAII,GAAG,CAACC,OAAJ,CAAYJ,MAAZ,IAAsB,CAAC,CAA3B,EAA8B;AAC5BR,YAAAA,WAAW,CAACa,MAAZ,GAAqBF,GAArB;AACAX,YAAAA,WAAW,CAACc,OAAZ,GAAsBd,WAAW,CAACO,IAAZ,CAAiBI,GAAjB,CAAtB;AACD;AACF;;AACDf,QAAAA,OAAO,CAACI,WAAD,CAAP;AACD,OAhBD,MAgBO;AACLH,QAAAA,OAAO,CAAC;AAACkB,UAAAA,KAAK,EAAE,CAAR;AAAWC,UAAAA,OAAO,EAAE,0BAA0BrB;AAA9C,SAAD,CAAP;AACD;AACF,KArBH,EAqBKsB,KArBL,CAqBW,UAAAC,CAAC,EAAI;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCF,CAAvC;AACArB,MAAAA,OAAO,CAAC;AAACkB,QAAAA,KAAK,EAAE,CAAR;AAAWC,QAAAA,OAAO,EAAE,4BAA4BrB;AAAhD,OAAD,CAAP;AACD,KAxBH;AAyBD;AA3ByB,CAA5B;AA6BA,eAAeF,mBAAf","sourcesContent":["import {\n  lookupProfile,\n} from 'blockstack'\n\nconst userProfilesService = {\n  fetchUserProfile: function (username, success, failure) {\n    lookupProfile(username)\n      .then((account) => {\n        if (account) {\n          let userProfile = {\n            username: username,\n            name: account.name,\n            description: account.description,\n            avatarUrl: (account.image && account.image.length > 0) ? account.image[0].contentUrl : '',\n            apps: account.apps\n          }\n          let domain = location.origin\n          for (var key in userProfile.apps) {\n            if (key.indexOf(domain) > -1) {\n              userProfile.appUrl = key\n              userProfile.gaiaUrl = userProfile.apps[key]\n            }\n          }\n          success(userProfile)\n        } else {\n          failure({error: 1, message: 'Unable to find user: ' + username})\n        }\n      }).catch(e => {\n        console.log('lookupUserProfile: e : ', e)\n        failure({error: 2, message: 'Unable to lookup user: ' + username})\n      })\n  },\n}\nexport default userProfilesService\n"]}]}